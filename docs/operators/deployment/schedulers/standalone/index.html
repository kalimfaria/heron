<!DOCTYPE html><html lang="en-us"><head><link rel="shortcut icon" type="image/png" sizes="16x16" href="https://twitter.github.io/heron/img/favicon-16x16.png"><link rel="shortcut icon" type="image/png" sizes="32x32" href="https://twitter.github.io/heron/img/favicon-32x32.png"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="Hugo 0.30.2" /><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Heron"><meta property="og:image" content="/img/logo54x54.png"><meta property="og:url" content="https://twitter.github.io/heron"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@heronstreaming"><meta name="twitter:title" content="Heron"><meta name="twitter:image" content="/img/HeronTextLogo.png"><meta property="og:site_name" content="Heron standalone"><meta property="og:url" content="/docs/operators/deployment/schedulers/standalone/"><meta property="og:description" content=""><meta name="twitter:description" content=""><title>Heron Documentation - Heron standalone</title><link rel="stylesheet" href="https://twitter.github.io/heron/css/font-awesome.min.css"><link rel="stylesheet" href="https://twitter.github.io/heron/css/style.css"><script type="text/javascript">
var shiftWindow = function() { scrollBy(0, -100) };
window.addEventListener("hashchange", shiftWindow);
function load() { if (window.location.hash) shiftWindow(); }
</script></head><body class="body"><main class="main"><nav class="hn-top-navbar navbar navbar-inverse navbar-fixed-top" role="navigation"><div class="hn-navbar-container container-fluid"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#hn-navbar" aria-controls="hn-navbar" aria-expanded="false"><span class="sr-only"><Toggle>navigation</Toggle></span><i class="hn-toggle-button fa fa-bars"></i></button><a class="hn-navbar-logo navbar-brand" href="https://twitter.github.io/heron/"><img class="pull-left" src="https://twitter.github.io/heron/img/HeronTextLogo-small.png"></a></div><div id="hn-navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li><a href="https://twitter.github.io/heron/docs/getting-started">Docs</a></li><li><a href="https://twitter.github.io/heron/docs/resources">Resources</a></li><li><a href="https://twitter.github.io/heron/docs/contributors/community">Community</a></li><li><a href="https://github.com/twitter/heron">GitHub</a></li><li><a href="https://groups.google.com/forum/#!forum/heron-users">Mailing List</a></li><li><a class="nav-icon" href="https://twitter.com/heronstreaming"><i class="fa fa-twitter"></i></a></li></ul></div></div></nav><div class="hn-main"><div class="container"><div class="row"><aside class="hn-sidebar hidden-xs hidden-sm col-md-4 col-lg-2"><nav class="hn-sidebar-nav"><div id="hn-accordion" class="panel-group" role="tablist" aria-multiselectable="true"><div class="panel panel-default"><section id="getting-started" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-getting-started" aria-labelledby="getting-started"><i class="fa fa-caret-right"></i>Getting Started</a></h4></section><div id="collapse-getting-started" class="panel-collapse collapse" aria-labelledby="getting-started"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/getting-started">Local (Single Node)</a></li><li><a href="https://twitter.github.io/heron/docs/migrate-storm-to-heron">Migrate Storm Topologies</a></li><li><a href="https://twitter.github.io/heron/docs/getting-started-troubleshooting">Troubleshooting Guide</a></li></ul></div></div></div><div class="panel panel-default"><section id="the-heron-streamlet-api" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-the-heron-streamlet-api" aria-labelledby="the-heron-streamlet-api"><i class="fa fa-caret-right"></i>The Heron Streamlet API</a></h4></section><div id="collapse-the-heron-streamlet-api" class="panel-collapse collapse" aria-labelledby="the-heron-streamlet-api"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/developers/java/streamlet-api">The Heron Streamlet API for Java</a></li></ul></div></div></div><div class="panel panel-default"><section id="the-heron-eco-api" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-the-heron-eco-api" aria-labelledby="the-heron-eco-api"><i class="fa fa-caret-right"></i>The Heron ECO API</a></h4></section><div id="collapse-the-heron-eco-api" class="panel-collapse collapse" aria-labelledby="the-heron-eco-api"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/developers/java/eco-api">The Heron ECO API for Java</a></li></ul></div></div></div><div class="panel panel-default"><section id="the-heron-topology-api" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-the-heron-topology-api" aria-labelledby="the-heron-topology-api"><i class="fa fa-caret-right"></i>The Heron Topology API</a></h4></section><div id="collapse-the-heron-topology-api" class="panel-collapse collapse" aria-labelledby="the-heron-topology-api"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/developers/java/topologies">The Heron Topology API for Java</a></li><li><a href="https://twitter.github.io/heron/docs/developers/java/effectively-once">Effectively-once Java topologies</a></li><li><a href="https://twitter.github.io/heron/docs/developers/python/topologies">Python Topologies</a></li><li><a href="https://twitter.github.io/heron/docs/developers/data-model">Heron Data Model</a></li><li><a href="https://twitter.github.io/heron/docs/developers/serialization">Tuple Serialization</a></li><li><a href="https://twitter.github.io/heron/docs/developers/ui-guide">Heron UI Guide</a></li><li><a href="https://twitter.github.io/heron/docs/developers/tuning">Tuning Guide</a></li><li><a href="https://twitter.github.io/heron/docs/developers/packing/ffdpacking">Packing Algorithms</a></li><li><a href="https://twitter.github.io/heron/docs/developers/simulator-mode">Simulator Mode</a></li><li><a href="https://twitter.github.io/heron/docs/developers/troubleshooting">Troubleshooting Guide</a></li></ul></div></div></div><div class="panel panel-default"><section id="client-api-docs" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-client-api-docs" aria-labelledby="client-api-docs"><i class="fa fa-caret-right"></i>Client API docs</a></h4></section><div id="collapse-client-api-docs" class="panel-collapse collapse" aria-labelledby="client-api-docs"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/api/java">Java</a></li><li><a href="https://twitter.github.io/heron/api/python">Python</a></li></ul></div></div></div><div class="panel panel-default"><section id="heron-concepts" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-heron-concepts" aria-labelledby="heron-concepts"><i class="fa fa-caret-right"></i>Heron Concepts</a></h4></section><div id="collapse-heron-concepts" class="panel-collapse collapse" aria-labelledby="heron-concepts"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/concepts/design-goals">Heron Design Goals</a></li><li><a href="https://twitter.github.io/heron/docs/concepts/topologies">Heron Topologies</a></li><li><a href="https://twitter.github.io/heron/docs/concepts/streamlet-api">Heron Streamlet API</a></li><li><a href="https://twitter.github.io/heron/docs/concepts/architecture">Heron Architecture</a></li><li><a href="https://twitter.github.io/heron/docs/concepts/delivery-semantics">Heron Delivery Semantics</a></li></ul></div></div></div><div class="panel panel-default"><section id="deployment" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-deployment" aria-labelledby="deployment"><i class="fa fa-caret-right"></i>Deployment</a></h4></section><div id="collapse-deployment" class="panel-collapse collapse" aria-labelledby="deployment"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/operators/deployment">Overview</a></li><li><a href="https://twitter.github.io/heron/docs/operators/deployment/configuration">Configuration</a></li><li><a href="https://twitter.github.io/heron/docs/operators/heron-api-server">The Heron API server</a></li></ul></div></div></div><div class="panel panel-default"><section id="state-managers" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-state-managers" aria-labelledby="state-managers"><i class="fa fa-caret-right"></i>State Managers</a></h4></section><div id="collapse-state-managers" class="panel-collapse collapse" aria-labelledby="state-managers"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/operators/deployment/statemanagers/zookeeper">Zookeeper</a></li><li><a href="https://twitter.github.io/heron/docs/operators/deployment/statemanagers/localfs">Local FS</a></li></ul></div></div></div><div class="panel panel-default"><section id="uploaders" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-uploaders" aria-labelledby="uploaders"><i class="fa fa-caret-right"></i>Uploaders</a></h4></section><div id="collapse-uploaders" class="panel-collapse collapse" aria-labelledby="uploaders"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/operators/deployment/uploaders/localfs">Local FS</a></li><li><a href="https://twitter.github.io/heron/docs/operators/deployment/uploaders/hdfs">HDFS</a></li><li><a href="https://twitter.github.io/heron/docs/operators/deployment/uploaders/s3">Amazon S3</a></li><li><a href="https://twitter.github.io/heron/docs/operators/deployment/uploaders/scp">Secure Copy (SCP)</a></li></ul></div></div></div><div class="panel panel-default"><section id="schedulers" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-schedulers" aria-labelledby="schedulers"><i class="fa fa-caret-right"></i>Schedulers</a></h4></section><div id="collapse-schedulers" class="panel-collapse collapse" aria-labelledby="schedulers"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/operators/deployment/schedulers/kubernetes">Kubernetes by Hand</a></li><li><a href="https://twitter.github.io/heron/docs/operators/deployment/schedulers/kubernetes-helm">Kubernetes with Helm</a></li><li><a href="https://twitter.github.io/heron/docs/operators/deployment/schedulers/aurora">Aurora Cluster</a></li><li><a href="https://twitter.github.io/heron/docs/operators/deployment/schedulers/standalone">Multi-node standalone cluster</a></li><li><a href="https://twitter.github.io/heron/docs/operators/deployment/schedulers/nomad">Nomad</a></li><li><a href="https://twitter.github.io/heron/docs/operators/deployment/schedulers/local">Local Cluster</a></li><li><a href="https://twitter.github.io/heron/docs/operators/deployment/schedulers/mesos-local-mac">Mesos Cluster Locally</a></li><li><a href="https://twitter.github.io/heron/docs/operators/deployment/schedulers/slurm">Slurm Cluster</a></li><li><a href="https://twitter.github.io/heron/docs/operators/deployment/schedulers/yarn">YARN Cluster</a></li></ul></div></div></div><div class="panel panel-default"><section id="cluster-configuration" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-cluster-configuration" aria-labelledby="cluster-configuration"><i class="fa fa-caret-right"></i>Cluster Configuration</a></h4></section><div id="collapse-cluster-configuration" class="panel-collapse collapse" aria-labelledby="cluster-configuration"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/operators/configuration/config-intro">Overview</a></li><li><a href="https://twitter.github.io/heron/docs/operators/configuration/system">System-Level</a></li><li><a href="https://twitter.github.io/heron/docs/operators/configuration/instance">Heron Instance</a></li><li><a href="https://twitter.github.io/heron/docs/operators/configuration/metrics-manager">Metrics Manager</a></li><li><a href="https://twitter.github.io/heron/docs/operators/configuration/stmgr">Stream Manager</a></li><li><a href="https://twitter.github.io/heron/docs/operators/configuration/tmaster">Topology Master</a></li></ul></div></div></div><div class="panel panel-default"><section id="observability" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-observability" aria-labelledby="observability"><i class="fa fa-caret-right"></i>Observability</a></h4></section><div id="collapse-observability" class="panel-collapse collapse" aria-labelledby="observability"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/operators/observability/prometheus">Prometheus</a></li><li><a href="https://twitter.github.io/heron/docs/operators/observability/graphite">Graphite</a></li><li><a href="https://twitter.github.io/heron/docs/operators/observability/scribe">Scribe</a></li></ul></div></div></div><div class="panel panel-default"><section id="user-manuals" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-user-manuals" aria-labelledby="user-manuals"><i class="fa fa-caret-right"></i>User Manuals</a></h4></section><div id="collapse-user-manuals" class="panel-collapse collapse" aria-labelledby="user-manuals"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/operators/heron-cli">Heron Client</a></li><li><a href="https://twitter.github.io/heron/docs/operators/heron-explorer">Heron Explorer</a></li><li><a href="https://twitter.github.io/heron/docs/operators/heron-tracker-api">Heron Tracker REST API</a></li><li><a href="https://twitter.github.io/heron/docs/operators/heron-tracker">Heron Tracker Runbook</a></li><li><a href="https://twitter.github.io/heron/docs/operators/heron-ui">Heron UI Runbook</a></li></ul></div></div></div><div class="panel panel-default"><section id="heron-developers" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-heron-developers" aria-labelledby="heron-developers"><i class="fa fa-caret-right"></i>Heron Developers</a></h4></section><div id="collapse-heron-developers" class="panel-collapse collapse" aria-labelledby="heron-developers"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/developers/compiling/compiling">Compiling</a></li><li><a href="https://twitter.github.io/heron/docs/developers/compiling/linux">Compiling on Linux</a></li><li><a href="https://twitter.github.io/heron/docs/developers/compiling/mac">Compiling on Mac OS X</a></li><li><a href="https://twitter.github.io/heron/docs/developers/compiling/docker">Compiling With Docker</a></li><li><a href="https://twitter.github.io/heron/docs/contributors/testing">Running Tests</a></li><li><a href="https://twitter.github.io/heron/docs/contributors/codebase">Code Organization</a></li></ul></div></div></div><div class="panel panel-default"><section id="extending-heron" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-extending-heron" aria-labelledby="extending-heron"><i class="fa fa-caret-right"></i>Extending Heron</a></h4></section><div id="collapse-extending-heron" class="panel-collapse collapse" aria-labelledby="extending-heron"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/contributors/custom-scheduler">Custom Scheduler</a></li><li><a href="https://twitter.github.io/heron/docs/contributors/custom-metrics-sink">Custom Metrics Sink</a></li></ul></div></div></div><div class="panel panel-default"><section id="heron-resources" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-heron-resources" aria-labelledby="heron-resources"><i class="fa fa-caret-right"></i>Heron Resources</a></h4></section><div id="collapse-heron-resources" class="panel-collapse collapse" aria-labelledby="heron-resources"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/resources">Heron Resources</a></li></ul></div></div></div><div class="panel panel-default"><section id="contributors" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-contributors" aria-labelledby="contributors"><i class="fa fa-caret-right"></i>Contributors</a></h4></section><div id="collapse-contributors" class="panel-collapse collapse" aria-labelledby="contributors"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/contributors/community">Community</a></li><li><a href="https://twitter.github.io/heron/docs/contributors/governance">Governance</a></li></ul></div></div></div></div></nav></aside><section class="hn-docs-main col-xs-12 col-sm-12 col-md-8 col-lg-10 col-md-offset-4 col-lg-offset-2"><header class="hn-docs-header page-header"><h1 class="hn-docs-title">Heron standalone</h1><div class="hn-docs-description"></div></header><article class="hn-docs-content">

<p>Heron enables you to easily run a multi-node cluster in <strong>standalone mode</strong>. The difference between standalone mode and <a href="../local">local mode</a> for Heron is that standalone mode involves running multiple compute nodes&mdash;using <a href="https://www.hashicorp.com/">Hashicorp</a>&rsquo;s <a href="https://www.nomadproject.io/">Nomad</a> as a scheduler&mdash;rather than just one.</p>

<h2 id="installation">Installation</h2>

<p>You can use Heron in standalone mode using the <code>heron-admin</code> CLI tool, which can be installed using the instructions <a href="../../../../getting-started">here</a>.</p>

<h2 id="requirements">Requirements</h2>

<p>In order to run Heron in standalone mode, you&rsquo;ll need to run a <a href="https://zookeeper.apache.org">ZooKeeper</a> cluster.</p>

<h2 id="configuration">Configuration</h2>

<p>Once you have the <code>heron-admin</code> CLI tool installed, you need to provide a list of hosts for both the Heron cluster itself and for <a href="https://zookeeper.apache.org">ZooKeeper</a>.</p>

<p>You can easily do this by running the following command:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ heron-admin standalone set</code></pre></div>
<p>That will open up an <code>inventory.yaml</code> file in whichever editor is specified in your <code>EDITOR</code> environment variable. The default is <a href="http://www.vim.org/">Vim</a>. That YAML file looks like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml">cluster<span class="p">:</span><span class="w">
</span><span class="w"></span>-<span class="w"> </span><span class="m">127.0</span>.<span class="m">0.1</span><span class="w">
</span><span class="w"></span>zookeepers<span class="p">:</span><span class="w">
</span><span class="w"></span>-<span class="w"> </span><span class="m">127.0</span>.<span class="m">0.1</span></code></pre></div>
<p>You can modify the file to include all hosts for your standalone cluster and for ZooKeeper. Once you&rsquo;ve added the lists of hosts for the Heron standalone cluster and ZooKeeper and saved the file, you can move on to <a href="#starting-and-stopping-the-cluster">starting the cluster</a>.</p>

<blockquote>
<p>To run Heron in standalone mode locally on your laptop, use the defaults that are already provided in the <code>inventory.yaml</code> file.</p>
</blockquote>

<h2 id="starting-and-stopping-the-cluster">Starting and stopping the cluster</h2>

<p>To start Heron in standalone mode once the host configuration has been applied:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ heron-admin standalone cluster start</code></pre></div>
<p>You should see output like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="o">[</span><span class="m">2018</span>-01-22 <span class="m">10</span>:37:06 -0800<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span>: Roles:
<span class="o">[</span><span class="m">2018</span>-01-22 <span class="m">10</span>:37:06 -0800<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span>:  - Master Servers: <span class="o">[</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="o">]</span>
<span class="o">[</span><span class="m">2018</span>-01-22 <span class="m">10</span>:37:06 -0800<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span>:  - Slave Servers: <span class="o">[</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="o">]</span>
<span class="o">[</span><span class="m">2018</span>-01-22 <span class="m">10</span>:37:06 -0800<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span>:  - Zookeeper Servers: <span class="o">[</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="o">]</span>
<span class="o">[</span><span class="m">2018</span>-01-22 <span class="m">10</span>:37:06 -0800<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span>: Updating config files...
<span class="o">[</span><span class="m">2018</span>-01-22 <span class="m">10</span>:37:06 -0800<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span>: Starting master on <span class="m">127</span>.0.0.1
<span class="o">[</span><span class="m">2018</span>-01-22 <span class="m">10</span>:37:06 -0800<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span>: Done starting masters
<span class="o">[</span><span class="m">2018</span>-01-22 <span class="m">10</span>:37:06 -0800<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span>: Starting slave on <span class="m">127</span>.0.0.1
<span class="o">[</span><span class="m">2018</span>-01-22 <span class="m">10</span>:37:06 -0800<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span>: Done starting slaves
<span class="o">[</span><span class="m">2018</span>-01-22 <span class="m">10</span>:37:06 -0800<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span>: Waiting <span class="k">for</span> cluster to come up... <span class="m">0</span>
<span class="o">[</span><span class="m">2018</span>-01-22 <span class="m">10</span>:37:08 -0800<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span>: Starting Heron API Server on <span class="m">127</span>.0.0.1
<span class="o">[</span><span class="m">2018</span>-01-22 <span class="m">10</span>:37:08 -0800<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span>: Waiting <span class="k">for</span> apiserver to come up... <span class="m">0</span>
<span class="o">[</span><span class="m">2018</span>-01-22 <span class="m">10</span>:37:09 -0800<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span>: Waiting <span class="k">for</span> apiserver to come up... <span class="m">1</span>
<span class="o">[</span><span class="m">2018</span>-01-22 <span class="m">10</span>:37:16 -0800<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span>: Done starting Heron API Server
<span class="o">[</span><span class="m">2018</span>-01-22 <span class="m">10</span>:37:16 -0800<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span>: Starting Heron Tools on <span class="m">127</span>.0.0.1
<span class="o">[</span><span class="m">2018</span>-01-22 <span class="m">10</span>:37:16 -0800<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span>: Waiting <span class="k">for</span> apiserver to come up... <span class="m">0</span>
<span class="o">[</span><span class="m">2018</span>-01-22 <span class="m">10</span>:37:17 -0800<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span>: Done starting Heron Tools
<span class="o">[</span><span class="m">2018</span>-01-22 <span class="m">10</span>:37:17 -0800<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span>: Heron standalone cluster complete!</code></pre></div>
<p>If you see the <code>Heron standalone cluster complete!</code> message, that means that the cluster is ready for you to <a href="#submitting-a-topology">submit</a> and manage topologies.</p>

<p>You can stop the cluster at any time using the <code>stop</code> command:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ heron-admin standalone cluster stop</code></pre></div>
<p>You will be prompted to confirm that you want to stop the cluster by typing <strong>yes</strong> or <strong>y</strong> (or <strong>no</strong> or <strong>n</strong> if you don&rsquo;t want to). If you enter <strong>yes</strong> or <strong>y</strong> and press <strong>Enter</strong>, all Heron-related jobs will be de-scheduled on Nomad.</p>

<h2 id="fetching-info-about-your-standalone-cluster">Fetching info about your standalone cluster</h2>

<p>At any time, you can retrieve information about your standalone cluster by running:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ heron-admin standalone info</code></pre></div>
<p>This will return a JSON string containing a list of hosts for Heron and ZooKeeper as well as URLs for the <a href="../../../heron-api-server">Heron API server</a>, <a href="../../../heron-ui">Heron UI</a>, and <a href="../../../heron-tracker">Heron Tracker</a>. Here is a cluster info JSON string if all defaults are retained:</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;numNodes&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nt">&#34;nodes&#34;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&#34;127.0.0.1&#34;</span>
  <span class="p">],</span>
  <span class="nt">&#34;roles&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;masters&#34;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&#34;127.0.0.1&#34;</span>
    <span class="p">],</span>
    <span class="nt">&#34;slaves&#34;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&#34;127.0.0.1&#34;</span>
    <span class="p">],</span>
    <span class="nt">&#34;zookeepers&#34;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&#34;127.0.0.1&#34;</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&#34;urls&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;serviceUrl&#34;</span><span class="p">:</span> <span class="s2">&#34;http://127.0.0.1:9000&#34;</span><span class="p">,</span>
    <span class="nt">&#34;heronUi&#34;</span><span class="p">:</span> <span class="s2">&#34;http://127.0.0.1:8889&#34;</span><span class="p">,</span>
    <span class="nt">&#34;heronTracker&#34;</span><span class="p">:</span> <span class="s2">&#34;http://127.0.0.1:8888&#34;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p>You can also get more specific bits of info using the <code>get</code> command:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># Heron Tracker URL
</span><span class="c1"></span>$ heron-admin standalone get heron-tracker-url

<span class="c1"># Heron UI URL
</span><span class="c1"></span>$ heron-admin standalone get heron-ui-url

<span class="c1"># Heron cluster service URL
</span><span class="c1"></span>$ heron-admin standalone get service-url</code></pre></div>
<h2 id="setting-the-service-url">Setting the service URL</h2>

<p>Once your standalone cluster is running, there&rsquo;s one final step before you can interact with the cluster: you need to specify the service URL for the <a href="../../../heron-api-server">Heron API server</a> for the standalone cluster. You can fetch that URL in two different ways:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># Using the &#34;get&#34; command
</span><span class="c1"></span>$ heron-admin standalone get service-url

<span class="c1"># Using the &#34;info&#34; command
</span><span class="c1"></span>$ heron-admin standalone info <span class="p">|</span> jq .urls.serviceUrl <span class="p">|</span> tr -d <span class="s1">&#39;&#34;&#39;</span></code></pre></div>
<p>Once you have the URL, you can use the <code>heron config</code> command to set the service URL:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ heron config standalone <span class="nb">set</span> service_url SERVICE_URL</code></pre></div>
<p>Here are some more convenient ways to set the service URL:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># Using the &#34;get&#34; command
</span><span class="c1"></span>$ heron config standalone <span class="nb">set</span> service_url <span class="se">\
</span><span class="se"></span>  <span class="k">$(</span>heron-admin standalone get service-url<span class="k">)</span>

<span class="c1"># Using the &#34;info&#34; command
</span><span class="c1"></span>$ heron config standalone <span class="nb">set</span> service_url <span class="se">\
</span><span class="se"></span>  <span class="k">$(</span>heron-admin standalone info <span class="p">|</span> jq .urls.serviceUrl <span class="p">|</span> tr -d <span class="s1">&#39;&#34;&#39;</span><span class="k">)</span></code></pre></div>
<p>If you&rsquo;re running a standalone cluster locally on your laptop, the service URL will always be <code>http://localhost:9000</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ heron config standalone <span class="nb">set</span> service_url http://localhost:9000</code></pre></div>
<h2 id="submitting-a-topology">Submitting a topology</h2>

<p>Once your standalone cluster is up and running and you&rsquo;ve set the service URL for the <a href="../../../heron-cli"><code>heron</code> CLI tool</a>, you can submit and manage topologies by specifying the <code>standalone</code> cluster. Here&rsquo;s an example topology submission command:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ heron submit standalone <span class="se">\
</span><span class="se"></span>  ~/.heron/examples/heron-streamlet-examples.jar <span class="se">\
</span><span class="se"></span>  com.twitter.heron.examples.streamlet.WindowedWordCountTopology <span class="se">\
</span><span class="se"></span>  WindowedWordCount</code></pre></div>
<p>Once the topology has been submitted, it can be deactivated, killed, updated, and so on, just like topologies on any other scheduler.</p>

<h2 id="managing-nomad">Managing Nomad</h2>

<p>Heron standalone uses <a href="https://www.nomadproject.io/">Nomad</a> as a scheduler. For the most part, you shouldn&rsquo;t need to interact with Nomad when managing your Heron standalone cluster. If you do need to manage Nomad directly, however, you can do so using the <code>heron-nomad</code> executable, which is installed at <code>~/.heron/bin/heron-nomad</code>. That executable is essentially an alias for the <code>nomad</code> CLI tool. You can find documentation in the <a href="https://www.nomadproject.io/docs/commands/index.html">official Nomad docs</a>.</p>

<p>You can also access the <a href="https://www.nomadproject.io/guides/ui.html">Nomad Web UI</a> on port 4646 of any master node in the Heron cluster. You can see a list of master nodes by running <code>heron-admin standalone info</code>. If you&rsquo;re running a standalone cluster locally on your machine, you can access the Nomad UI at <code>localhost:4646</code>.</p>
</article></section></div></div></div></main><script src="https://code.jquery.com/jquery-2.2.1.min.js"></script><script src="https://twitter.github.io/heron/js/bootstrap.js"></script><script src="https://twitter.github.io/heron/js/jquery.scrollTo.js"></script><script src="https://twitter.github.io/heron/js/app.min.js"></script><script type="text/javascript">
$('pre code').each(function() {
  console.log(this);
  this.innerHTML = this.innerHTML.replace(/\$\s/g, function(matched) {
    return `<span class=\"clp\">${matched}</span>`;
  });
});
</script></body></html>